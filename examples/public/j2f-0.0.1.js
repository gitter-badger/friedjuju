!function e(n,t,r){function i(d,a){if(!t[d]){if(!n[d]){var l="function"==typeof require&&require;if(!a&&l)return l(d,!0);if(o)return o(d,!0);var s=new Error("Cannot find module '"+d+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[d]={exports:{}};n[d][0].call(u.exports,function(e){var t=n[d][1][e];return i(t?t:e)},u,u.exports,e,n,t,r)}return t[d].exports}for(var o="function"==typeof require&&require,d=0;d<r.length;d++)i(r[d]);return i}({1:[function(e,n,t){function r(e,n,t,i){if(this.id=e,this.value=n,this.index=t,this.children=[],i)if(i instanceof Array)for(var o=0;o<i.length;o++)this.children.push(i[o]);else{if(!(i instanceof r))throw new Error("Invalid children passed into Token constructor. Token #"+this.id);this.children.push(i)}}r.prototype.addChild=function(e){if(!(e instanceof r))throw new Error("Invalid Token being added to Token #"+this.id+"\n-> childToken = "+e.toString());this.children.push(e)},r.Literal="Literal","undefined"!=typeof n&&(n.exports=r)},{}],2:[function(e,n,t){function r(e,n){e instanceof Array||(e=[e]),this.tokenIds=e,this.fnHandler=n}var i={subscriptions:[],getSubscriptionsForToken:function(e){var n=[];return this.subscriptions.forEach(function(t){t.tokenIds.indexOf(e.id)>-1&&n.push(t)}),n},emit:function(e,n){this.getSubscriptionsForToken(n).forEach(function(e){e.fnHandler(n)})}},o={traverse:function(e){var n=i.getSubscriptionsForToken(e);n.length>0&&i.emit(n,e);for(var t=0;t<e.children.length;t++){var r=e.children[t];this.traverse(r)}},subscribe:function(e,n){var t=new r(e,n);i.subscriptions.push(t)}};"undefined"!=typeof n&&(n.exports=o)},{}],3:[function(e,n,t){var r=e("./Token.js"),i=e("./parserUtilsRestricted.js"),o=e("./parserUtilsExtended.js");for(var d in o)r[d]=d;var a={parseExtended:function(e){var n=0,t=o.Expression(e,n);if(t.newIndex<e.length)throw new Error("Unparsed characters exist at the end of the expression: "+e.substr(t.newIndex));return t},parseRestricted:function(e){var n=0,t=i.Expression(e,n);if(t.newIndex<e.length)throw new Error("Unparsed characters exist at the end of the expression: "+e.substr(t.newIndex));return t}};"undefined"!=typeof n&&(n.exports=a)},{"./Token.js":1,"./parserUtilsExtended.js":5,"./parserUtilsRestricted.js":6}],4:[function(e,n,t){var r=e("./Token.js"),i={checkMatch:function(e,n,t){return t>=e.length?void 0:e.substr(t,n.length)===n?{newIndex:t+n.length,token:new r(r.Literal,n,t)}:void 0},exactlyText:function(e,n,t,i){if(!(n>=e.length)){var o=this.checkMatch(e,t,n);if(o)return{newIndex:n+t.length,token:new r(i,e.substr(n,t.length),n)}}},repeat0Plus:function(e,n,t,i){if(!(n>=e.length)){for(var o=n,d=new r(r[t],"",n);n<e.length&&(ret=i[t](e,n),ret);)d.addChild(ret.token),n=ret.newIndex;if(!(d.children.length<1))return d.value=e.substring(o,n),{newIndex:n,token:d}}},repeat1Plus:function(e,n,t,i){if(!(n>=e.length)){var o=n,d=new r(r[t],"",n),a=i[t](e,n);if(a){for(d.addChild(a.token),n=a.newIndex;n<e.length&&(a=i[t](e,n));)d.addChild(a.token),n=a.newIndex;return d.value=e.substring(o,n),{newIndex:n,token:d}}}},onlyRepeat1Plus:function(e,n,t,i,o){if(!(n>=e.length)){var d=n,a=new r(o,"",n),l=this.repeat1Plus(e,n,t,i);return l&&(n=l.newIndex,a.addChild(l.token)),a.children.length>0?(a.value=e.substring(d,n),{newIndex:n,token:a}):void 0}},or:function(e,n,t,i,o){if(!(n>=e.length)){for(var d=n,a=void 0,l=-1,s=0;s<t.length;s++){var u=t[s],h=i[u](e,n);h&&l<h.newIndex&&(a=h.token,l=h.newIndex)}if(a){n=l;var c=new r(o,e.substring(d,n),n,a);return{newIndex:n,token:c}}}},exactlyOne:function(e,n,t,i,o){if(!(n>=e.length)){var d=n,a=new r(o,"",n),l=i[t](e,n);return l?(n=l.newIndex,a.addChild(l.token),a.value=e.substring(d,n),{newIndex:n,token:a}):void 0}},seq:function(e,n,t,i,o){if(!(n>=e.length)){for(var d=n,a=new r(o,"",n),l=0;l<t.length;l++){var s=t[l],u=i[s](e,n);if(!u)return;n=u.newIndex,a.addChild(u.token)}return a.children.length>0?(a.value=e.substring(d,n),{newIndex:n,token:a}):void 0}}};"undefined"!=typeof n&&(n.exports=i)},{"./Token.js":1}],5:[function(e,n,t){var r=e("./Token.js"),i=e("./parserCommonFunctions.js"),o=e("./parserUtilsRestricted.js"),d={ExpressionPiece:function(e,n){return n>=e.length?void 0:i.or(e,n,["Wildcard","SingleObjectPlaceholder","NumberPrefixedElement","Attribute","Element","StringElement"],this,"ExpressionPiece")},Attribute:function(e,n){if(!(n>=e.length)){var t=n,o=i.checkMatch(e,"@",n);if(o){n=o.newIndex;var d=i.repeat1Plus(e,n,"Char",this);if(d)return n=d.newIndex,{newIndex:d.newIndex,token:new r(r.Attribute,e.substring(t,n),t,[o.token,d.token])}}}},BoundedAttributeExpression:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.BoundedAttributeExpression,"",n),d=i.checkMatch(e,"[",n);if(d){n=d.newIndex,o.addChild(d.token);var a=this.Attribute(e,n);if(a){n=a.newIndex,o.addChild(a.token);var l=i.checkMatch(e,"=",n);if(l){n=l.newIndex,o.addChild(l.token);var s=i.repeat1Plus(e,n,"Char",this);if(s){n=s.newIndex,o.addChild(s.token);var u=i.checkMatch(e,"]",n);if(u)return n=u.newIndex,o.addChild(u.token),o.value=e.substring(t,n),{newIndex:n,token:o}}}}}}},BoundedAttributeDeclaration:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.BoundedAttributeDeclaration,"",n),d=i.checkMatch(e,"[",n);if(d){n=d.newIndex,o.addChild(d.token);var a=this.Attribute(e,n);if(a){n=a.newIndex,o.addChild(a.token);var l=i.checkMatch(e,"]",n);if(l)return n=l.newIndex,o.addChild(l.token),o.value=e.substring(t,n),{newIndex:n,token:o}}}}},BoundedElementExpression:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.BoundedElementExpression,"",n),d=i.checkMatch(e,"[",n);if(d){n=d.newIndex,o.addChild(d.token);var a=this.ElementName(e,n);if(a){n=a.newIndex,o.addChild(a.token);var l=i.checkMatch(e,"=",n);if(l){n=l.newIndex,o.addChild(l.token);var s=i.repeat1Plus(e,n,"Char",this);if(s){n=s.newIndex,o.addChild(s.token);var u=i.checkMatch(e,"]",n);if(u)return n=u.newIndex,o.addChild(u.token),o.value=e.substring(t,n),{newIndex:n,token:o}}}}}}},BoundedElementDeclaration:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.BoundedElementDeclaration,"",n),d=i.checkMatch(e,"[",n);if(d){n=d.newIndex,o.addChild(d.token);var a=this.ElementName(e,n);if(a){n=a.newIndex,o.addChild(a.token);var l=i.checkMatch(e,"]",n);if(l)return n=l.newIndex,o.addChild(l.token),o.value=e.substring(t,n),{newIndex:n,token:o}}}}},ArrayIndex:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.ArrayIndex,"",n),d=i.checkMatch(e,"[",n);if(d){n=d.newIndex,o.addChild(d.token);var a=i.checkMatch(e,"*",n);if(a){n=a.newIndex,o.addChild(a.token);var l=i.checkMatch(e,"]",n);if(l)return n=l.newIndex,o.addChild(l.token),o.value=e.substring(t,n),{newIndex:n,token:o};return}var s=i.repeat1Plus(e,n,"Digit",this);if(s){n=s.newIndex,o.addChild(s.token);var l=i.checkMatch(e,"]",n);if(l)return n=l.newIndex,o.addChild(l.token),o.value=e.substring(t,n),{newIndex:n,token:o}}}}},Element:function(e,n){if(!(n>=e.length)){var t=n,i=new r(r.Element,"",n),o=this.ElementName(e,n);if(o){n=o.newIndex,i.addChild(o.token);var d=this.ElementTail(e,n);return d&&(n=d.newIndex,i.addChild(d.token)),i.value=e.substring(t,n),{newIndex:n,token:i}}}},ElementName:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.ElementName,"",n),d=this.Char(e,n),a=this.Digit(e,n);if(!a&&d){var l=i.repeat1Plus(e,n,"Char",this);if(l)return n=l.newIndex,o.addChild(l.token),o.value=e.substring(t,n),{newIndex:n,token:o}}}},ElementTail:function(e,n){if(!(n>=e.length)){for(var t=n,i=new r(r.ElementTail,"",n);n<e.length;){var o=void 0,d=-1,a=this.BoundedAttributeExpression(e,n);a&&(o=a.token,d=a.newIndex);var l=this.BoundedAttributeDeclaration(e,n);l&&d<l.newIndex&&(o=l.token,d=l.newIndex);var s=this.BoundedElementExpression(e,n);s&&d<s.newIndex&&(o=s.token,d=s.newIndex);var u=this.BoundedElementDeclaration(e,n);u&&d<u.newIndex&&(o=u.token,d=u.newIndex);var h=this.ArrayIndex(e,n);if(h&&d<h.newIndex&&(o=h.token,d=h.newIndex),!o)break;n=d,i.addChild(o)}if(!(i.children.length<1))return i.value=e.substring(t,n),{newIndex:n,token:i}}},Char:function(e,n){if(!(n>=e.length)){var t=this.Dot(e,n);if(!(t||(t=i.checkMatch(e,"=",n),t||(t=i.checkMatch(e,"@",n),t||(t=i.checkMatch(e,"[",n),t||(t=i.checkMatch(e,"]",n),t||(t=this.Wildcard(e,n),t||(t=this.SingleObjectPlaceholder(e,n)))))))))return{newIndex:n+1,token:new r(r.Char,e.substr(n,1),n)}}},Wildcard:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.Wildcard,"",n),d=i.checkMatch(e,"*",n);if(d){n=d.newIndex,o.addChild(d.token);var a=this.ElementTail(e,n);return a&&(n=a.newIndex,o.addChild(a.token)),o.value=e.substring(t,n),{newIndex:n,token:o}}}},SingleObjectPlaceholder:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.SingleObjectPlaceholder,"",n),d=i.checkMatch(e,"?",n);if(d){n=d.newIndex,o.addChild(d.token);var a=this.ElementTail(e,n);return a&&(n=a.newIndex,o.addChild(a.token)),o.value=e.substring(t,n),{newIndex:n,token:o}}}}};for(var a in o)"ExpressionPiece"!==a&&"Attribute"!==a&&"Element"!==a&&"Wildcard"!==a&&"SingleObjectPlaceholder"!==a&&"Usage1Char"!==a&&(d[a]=o[a]);"undefined"!=typeof n&&(n.exports=d)},{"./Token.js":1,"./parserCommonFunctions.js":4,"./parserUtilsRestricted.js":6}],6:[function(e,n,t){var r=e("./Token.js"),i=e("./parserCommonFunctions.js"),o={Expression:function(e,n){if(!(n>=e.length)){var t=n,i=new r(r.Expression,"",n),o=this.ExpressionPiece(e,n);if(o){for(n=o.newIndex,i.addChild(o.token);n<e.length;){var d=n,a=[],l=this.Dot(e,n);if(!l)break;if(n=l.newIndex,a.push(l.token),o=this.ExpressionPiece(e,n),o&&(n=o.newIndex,a.push(o.token)),!a){n=d;break}for(var s=0;s<a.length;s++)i.addChild(a[s])}return i.children.length>0?(i.value=e.substring(t,n),{newIndex:n,token:i}):void 0}}},Dot:function(e,n){if(!(n>=e.length)){var t=i.checkMatch(e,".",n);return t?{newIndex:t.newIndex,token:new r(r.Dot,e.substr(n,1),n)}:void 0}},ExpressionPiece:function(e,n){return n>=e.length?void 0:i.or(e,n,["NumberPrefixedElement","Attribute","Element","StringElement"],this,"ExpressionPiece")},Attribute:function(e,n){if(!(n>=e.length)){var t=n,o=i.checkMatch(e,"@",n);if(o){n=o.newIndex;var d=i.repeat1Plus(e,n,"Usage1Char",this);if(d)return n=d.newIndex,{newIndex:d.newIndex,token:new r(r.Attribute,e.substring(t,n),t,[o.token,d.token])}}}},Element:function(e,n){if(!(n>=e.length)){var t=n,o=i.repeat1Plus(e,n,"Usage1Char",this);return o?{newIndex:o.newIndex,token:new r(r.Element,o.token.value,t,[o.token])}:void 0}},NumberPrefixedElement:function(e,n){if(!(n>=e.length)){var t=n,o=new r(r.NumberPrefixedElement,"",n),d=i.checkMatch(e,"$",n);if(d){o.addChild(d.token),n=d.newIndex;var a=i.repeat1Plus(e,n,"Digit",this);if(a){o.addChild(a.token),n=a.newIndex;var l=this.Element(e,n);if(l)return o.addChild(l.token),n=l.newIndex,o.value=e.substring(t,n),{newIndex:n,token:o}}}}},StringElement:function(e,n){if(!(n>=e.length)){var t=i.checkMatch(e,"$str",n);return t?{newIndex:t.newIndex,token:new r(r.StringElement,e.substr(n,1),n)}:void 0}},Digit:function(e,n){if(!(n>=e.length))for(var t=0;9>=t;t++){var o=i.checkMatch(e,t.toString(),n);if(o)return{newIndex:o.newIndex,token:new r(r.Digit,e.substr(n,1),n)}}},Usage1Char:function(e,n){if(!(n>=e.length)){var t=this.Dot(e,n);if(!(t||(t=this.Wildcard(e,n),t||(t=this.SingleObjectPlaceholder(e,n),t||(t=i.checkMatch(e,"=",n),t||(t=i.checkMatch(e,"@",n),t||(t=i.checkMatch(e,"[",n),t||(t=i.checkMatch(e,"]",n)))))))))return{newIndex:n+1,token:new r(r.Usage1Char,e.substr(n,1),n)}}},Wildcard:function(e,n){if(!(n>=e.length)){var t=i.checkMatch(e,"*",n);return t?{newIndex:t.newIndex,token:new r(r.Wildcard,e.substr(n,1),n)}:void 0}},SingleObjectPlaceholder:function(e,n){if(!(n>=e.length)){var t=i.checkMatch(e,"?",n);return t?{newIndex:t.newIndex,token:new r(r.SingleObjectPlaceholder,e.substr(n,1),n)}:void 0}}};"undefined"!=typeof n&&(n.exports=o)},{"./Token.js":1,"./parserCommonFunctions.js":4}],7:[function(e,n,t){var r=e("../json-to-json/expressionQuery.js");"undefined"==typeof window&&(window={});var i={normalizeMappingObject:function(e,n){for(var t in e)if("string"==typeof t){var r=e[t];if(r instanceof Function)n[t]?n[t].push(r):n[t]=[r];else{if(!(r instanceof Array))throw new Error("The value in the mapping object was not a Function or an Array of Function elements | val = "+r.toString());r.forEach(function(e){if(!(e instanceof Function))throw new Error("The value in the mapping object was not a Function or an Array of Function elements | val = "+e.toString())}),n[t]?n[t].push(r):n[t]=r}}},normalizeMappingArray:function(e){var n={};return e instanceof Array?(e.forEach(function(e){if("object"!=typeof e)throw new Error("If the mapping object is an array then all its elements must be objects | map = "+e.toString());i.normalizeMappingObject(e,n)}),n):(this.normalizeMappingObject(e,n),n)},bind:function(e,n){for(var t in n){var i=n[t],o=r.query(t,e);o.forEach(function(e){e.__boundFns=i})}},onNode:function(e,n,t,r){var i=e.__boundFns;i&&(delete e.__boundFns,i.forEach(function(i){i(e,n,t,r)}))},traverse:function(e,n,t,r){this.onNode(e,n,t,r);var i=e;for(var o in e){var d=e[o];"object"==typeof d&&this.traverse(d,e,i,r),i=d}}},o=window.j2f={traverse:function(e,n){if(e){var t=i.normalizeMappingArray(n);i.bind(e,t);var r={};return i.traverse(e,null,null,r),r}}};"undefined"!=typeof n&&(n.exports=o)},{"../json-to-json/expressionQuery.js":8}],8:[function(e,n,t){var r=e("../expression-parser/ep.js"),i=e("../expression-parser/astEmitter.js"),o={yieldAll:function(e){if("object"!=typeof e)return[];if(e instanceof Array){var n=[];return e.forEach(function(e){for(var t=o.yieldAll(e),r=0;r<t.length;r++){var i=t[r];-1===n.indexOf(i)&&n.push(i)}}),n}var t=[e];for(var r in e){var i=e[r],d=this.yieldAll(i);d.forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}return t},yieldImmediateChildren:function(e){if("object"!=typeof e)return[];if(e instanceof Array){var n=[];return e.forEach(function(t){for(var r in t){var i=t[r];"object"==typeof e&&n.push(i)}}),n}var t=[];for(var r in e)t.push(e[r]);return t},yieldElement:function(e,n){if(e instanceof Array){var t=[];return e.forEach(function(e){for(var r=o.yieldElement(e,n),i=0;i<r.length;i++)t.push(r[i])}),t}var r=[];for(var i in e)i===n&&r.push(e[i]);return r},yieldNumberedElement:function(e,n,t){if(e instanceof Array){var r=[];return e.forEach(function(e){for(var i=o.yieldNumberedElement(e,n,t),d=0;d<i.length;d++)r.push(i[d])}),r}var i=[];for(var d in e)(0===t&&d===n||d==="$"+t+n)&&i.push(e[d]);return i},yieldBoundedAttributeExpression:function(e,n,t){if(e instanceof Array){var r=[];return e.forEach(function(e){for(var i=o.yieldBoundedAttributeExpression(e,n,t),d=0;d<i.length;d++)r.push(i[d])}),r}var i=[];return e[n.value]===t.value&&i.push(e),i},yieldBoundedAttributeDeclaration:function(e,n){if(e instanceof Array){var t=[];return e.forEach(function(e){for(var r=o.yieldBoundedAttributeDeclaration(e,n),i=0;i<r.length;i++)t.push(r[i])}),t}var r=[];return"undefined"!=typeof e[n.value]&&r.push(e),r},yieldBoundedElementExpression:function(e,n,t){if(e instanceof Array){var r=[];return e.forEach(function(e){for(var i=o.yieldBoundedElementExpression(e,n,t),d=0;d<i.length;d++)r.push(i[d])}),r}var i=[];return e[n.value]===t.value&&i.push(e),i},yieldBoundedElementDeclaration:function(e,n){if(e instanceof Array){var t=[];return e.forEach(function(e){for(var r=o.yieldBoundedElementDeclaration(e,n),i=0;i<r.length;i++)t.push(r[i])}),t}var r=[];return"undefined"!=typeof e[n.value]&&r.push(e),r},yieldElementTail:function(e,n){for(var t=[],r=0;r<n.children.length;r++){var i=n.children[r];if("ArrayIndex"===i.id){var d=i.children[1],a=[];"*"===d.value?e.forEach(function(e){e.forEach(function(e){a.push(e)})}):e.forEach(function(e){var n=Number(d.value);n<e.length&&a.push(e[n])}),t=a}else if("BoundedAttributeExpression"===i.id){var l=i.children[1],s=i.children[3];t=o.yieldBoundedAttributeExpression(e,l,s)}else if("BoundedAttributeDeclaration"===i.id){var l=i.children[1];t=o.yieldBoundedAttributeDeclaration(e,l)}else if("BoundedElementExpression"===i.id){var u=i.children[1],h=i.children[3];t=o.yieldBoundedElementExpression(e,u,h)}else if("BoundedElementDeclaration"===i.id){var u=i.children[1];t=o.yieldBoundedElementDeclaration(e,u)}}return t}},d={query:function(e,n){var t=r.parseExtended(e),d=void 0;return i.subscribe(["ExpressionPiece"],function(e){var t=e.children[0];if("Wildcard"===t.id){if(d=d?o.yieldAll(d):o.yieldAll(n),d&&t.children.length>1){var r=t.children[1];d=o.yieldElementTail(d,r)}}else if("SingleObjectPlaceholder"===t.id){if(d){var i=[];d.forEach(function(e){for(var n=o.yieldImmediateChildren(e),t=0;t<n.length;t++)i.push(n[t])}),d=i}else d=o.yieldImmediateChildren(n);if(d&&t.children.length>1){var r=t.children[1];d=o.yieldElementTail(d,r)}}else if("Element"===t.id){var a=t.children[0];if(d){var i=[];d.forEach(function(e){for(var n=o.yieldElement(e,a.value),t=0;t<n.length;t++)i.push(n[t])}),d=i}else d=o.yieldElement(n,a.value);if(d&&t.children.length>1){var r=t.children[1];d=o.yieldElementTail(d,r)}}else if("NumberPrefixedElement"===t.id){var a=t.children[2].children[0],l=t.children[1];if(d){var i=[];d.forEach(function(e){for(var n=o.yieldNumberedElement(e,a.value,l.value),t=0;t<n.length;t++)i.push(n[t])}),d=i}else d=o.yieldNumberedElement(n,a.value,l.value)}!d||d.length<1}),i.traverse(t.token),d}};"undefined"!=typeof n&&(n.exports=d)},{"../expression-parser/astEmitter.js":2,"../expression-parser/ep.js":3}]},{},[7]),"undefined"!=typeof module&&(module.exports=window.j2f);